{"ast":null,"code":"var _jsxFileName = \"A:\\\\Cours\\\\NodeJs\\\\projet\\\\projet\\\\collab\\\\front\\\\src\\\\components\\\\SignIn\\\\SignIn.jsx\",\n  _s = $RefreshSig$();\nimport './signin.scss';\nimport { Button, TextField } from \"@mui/material\";\nimport { fetchPost } from \"../../utils/fetch\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Alert from \"../Alert/Alert\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport React from \"react\";\nimport AppContext from \"../../context/AppContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignIn = () => {\n  _s();\n  // Hook de navigation\n  const navigate = useNavigate();\n\n  // On récupère les variables d'environnement\n  const {\n    REACT_APP_SIGNIN\n  } = process.env;\n\n  // On récupère le context\n  const {\n    openError,\n    setOpenError,\n    handleCloseError\n  } = useContext(AppContext);\n\n  // On réinitialise le state d'ouverture du message d'erreur\n  useEffect(() => {\n    setOpenError(false);\n  }, []);\n\n  // On définit un state par défaut pour les credentials\n  const emptyCredentials = {\n    username: '',\n    password: ''\n  };\n\n  // Tous les states de SignIn.jsx\n  const [credentials, setCredentials] = useState(emptyCredentials);\n\n  // Fonction de signin\n  const handleSignIn = async e => {\n    e.preventDefault();\n    try {\n      await fetchPost(REACT_APP_SIGNIN, credentials).then(res => {\n        // Si l'utilisateur n'existe pas, on redirige vers la page de login\n        if (res.status === true) {\n          navigate('/login');\n        }\n        // Sinon on affiche un message d'erreur et on réinitialise les champs\n        else {\n          setOpenError(true);\n          navigate('/sign_in');\n          throw new Error(res.message);\n        }\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  // Fonction de mise à jour du formulaire\n  const handleChange = e => {\n    setCredentials({\n      ...credentials,\n      [e.target.id]: e.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"signin\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signin__container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signin__container__wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"/sign_in\",\n          method: \"POST\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signin__container__wrapper__input\",\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              id: \"username\",\n              className: \"formInput\",\n              label: \"Username\",\n              color: \"primary\",\n              onChange: e => handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"password\",\n              className: \"formInput\",\n              label: \"Password\",\n              type: \"password\",\n              color: \"primary\",\n              onChange: e => handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            type: \"submit\",\n            className: \"signin__container__wrapper__button\",\n            onClick: e => handleSignIn(e),\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          open: openError,\n          autoHideDuration: 6000,\n          onClose: handleCloseError,\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            onClose: handleCloseError,\n            severity: \"error\",\n            sx: {\n              width: '100%'\n            },\n            children: \"User already exists, try again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(SignIn, \"Q1/CeH/aWGMfAz4khpzVIRXMCDE=\", false, function () {\n  return [useNavigate];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["Button","TextField","fetchPost","useContext","useEffect","useState","useNavigate","Alert","Snackbar","React","AppContext","SignIn","navigate","REACT_APP_SIGNIN","process","env","openError","setOpenError","handleCloseError","emptyCredentials","username","password","credentials","setCredentials","handleSignIn","e","preventDefault","then","res","status","Error","message","console","error","handleChange","target","id","value","width"],"sources":["A:/Cours/NodeJs/projet/projet/collab/front/src/components/SignIn/SignIn.jsx"],"sourcesContent":["import './signin.scss';\r\nimport {Button, TextField} from \"@mui/material\";\r\nimport {fetchPost} from \"../../utils/fetch\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport Alert from \"../Alert/Alert\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport React from \"react\";\r\nimport AppContext from \"../../context/AppContext\";\r\n\r\nconst SignIn = () => {\r\n  // Hook de navigation\r\n  const navigate = useNavigate();\r\n\r\n  // On récupère les variables d'environnement\r\n  const { REACT_APP_SIGNIN } = process.env;\r\n\r\n  // On récupère le context\r\n  const { openError, setOpenError, handleCloseError } = useContext(AppContext);\r\n\r\n  // On réinitialise le state d'ouverture du message d'erreur\r\n  useEffect(() => {\r\n    setOpenError(false);\r\n  }, [])\r\n\r\n  // On définit un state par défaut pour les credentials\r\n  const emptyCredentials = {\r\n    username: '',\r\n    password: ''\r\n  }\r\n\r\n  // Tous les states de SignIn.jsx\r\n  const [credentials, setCredentials] = useState(emptyCredentials);\r\n\r\n  // Fonction de signin\r\n  const handleSignIn = async(e) => {\r\n    e.preventDefault();\r\n    try{\r\n      await fetchPost(REACT_APP_SIGNIN, credentials)\r\n        .then(res => {\r\n          // Si l'utilisateur n'existe pas, on redirige vers la page de login\r\n          if(res.status === true){\r\n            navigate('/login');\r\n          }\r\n          // Sinon on affiche un message d'erreur et on réinitialise les champs\r\n          else{\r\n            setOpenError(true);\r\n            navigate('/sign_in');\r\n            throw new Error(res.message);\r\n          }\r\n        });\r\n    } catch(e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  // Fonction de mise à jour du formulaire\r\n  const handleChange = (e) => {\r\n    setCredentials({\r\n      ...credentials,\r\n      [e.target.id]: e.target.value}\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"signin\">\r\n      <div className=\"signin__container\">\r\n        <div className=\"signin__container__wrapper\">\r\n          <h1>Sign in</h1>\r\n          <form action=\"/sign_in\" method=\"POST\">\r\n            <div className=\"signin__container__wrapper__input\">\r\n              <TextField id=\"username\" className=\"formInput\" label=\"Username\" color=\"primary\" onChange={(e) => handleChange(e)} />\r\n              <TextField id=\"password\" className=\"formInput\" label=\"Password\" type=\"password\" color=\"primary\" onChange={(e) => handleChange(e)} />\r\n            </div>\r\n            <Button variant=\"outlined\" type=\"submit\" className=\"signin__container__wrapper__button\" onClick={(e) => handleSignIn(e)}>\r\n              Sign in\r\n            </Button>\r\n          </form>\r\n          <Snackbar open={openError} autoHideDuration={6000} onClose={handleCloseError}>\r\n            <Alert onClose={handleCloseError} severity=\"error\" sx={{ width: '100%' }}>\r\n              User already exists, try again\r\n            </Alert>\r\n          </Snackbar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignIn;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}